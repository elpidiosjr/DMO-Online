<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Digimon Cards - Hub</title>
  <link rel="icon" type="image/png" href="image/agumon.png">

  <style>
    :root{
      --bg: #020617;
      --card: #020617;
      --accent: #38bdf8;
      --accent-strong: #2563eb;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border-soft: rgba(148,163,184,0.35);
    }

    *{box-sizing:border-box;}

    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      background:radial-gradient(circle at top,#0b1120 0,#020617 55%,#000 100%);
      color:var(--text);
      min-height:100vh;
      padding:20px 22px 26px;
    }

    a{color:inherit;text-decoration:none;}

    .container{
      max-width:1120px;
      margin:0 auto;
    }

    /* HEADER SUPERIOR */
    .top-bar{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
      margin-bottom:22px;
    }

    .brand-block{
      display:flex;
      flex-direction:column;
      gap:4px;
    }

    .brand-title{
      font-size:1.9rem;
      font-weight:800;
      letter-spacing:.03em;
      background:linear-gradient(120deg,#60a5fa,#38bdf8,#a855f7);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }

    .brand-sub{
      font-size:.9rem;
      color:var(--muted);
    }

    .player-box{
      padding:10px 14px;
      border-radius:14px;
      background:radial-gradient(circle at top,#020617,#020617);
      border:1px solid rgba(30,64,175,.85);
      box-shadow:0 12px 30px rgba(15,23,42,.9);
      min-width:200px;
      text-align:right;
      font-size:.85rem;
    }

    .player-label{
      color:var(--muted);
      margin-bottom:2px;
    }

    .player-email{
      font-weight:600;
      font-size:.9rem;
    }

    .player-coins{
      margin-top:4px;
      font-weight:700;
      font-size:.95rem;
      display:flex;
      align-items:center;
      justify-content:flex-end;
      gap:6px;
    }

    .coins-icon{
      font-size:1rem;
    }

    /* LAYOUT PRINCIPAL */
    .main-layout{
      display:grid;
      grid-template-columns: minmax(0,1.45fr) minmax(0,1.05fr);
      gap:16px;
    }

    @media (max-width:900px){
      .main-layout{
        grid-template-columns:1fr;
      }
    }

    /* CARD BASE */
    .card{
      background:radial-gradient(circle at top,#020617,#020617);
      border-radius:18px;
      padding:16px 18px;
      border:1px solid rgba(30,64,175,.9);
      box-shadow:0 16px 40px rgba(0,0,0,.85);
      position:relative;
      overflow:hidden;
    }

    .card::before{
      content:"";
      position:absolute;
      inset:-40%;
      background:radial-gradient(circle at top left,rgba(56,189,248,.16),transparent 60%);
      opacity:.9;
      pointer-events:none;
    }

    .card-inner{position:relative;}

    /* STATUS DO TAMER */
    .status-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:10px;
      gap:10px;
    }

    .status-header h2{
      margin:0;
      font-size:1.2rem;
    }

    .status-tag{
      font-size:.75rem;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.5);
      background:rgba(15,23,42,.9);
      color:var(--muted);
      white-space:nowrap;
    }

    .status-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
      gap:10px;
      margin-top:4px;
    }

    .status-item{
      padding:8px 10px;
      border-radius:12px;
      background:rgba(15,23,42,.96);
      border:1px solid rgba(30,64,175,.8);
    }

    .status-label{
      font-size:.78rem;
      color:var(--muted);
    }

    .status-value{
      font-size:1rem;
      font-weight:700;
      margin-top:3px;
    }

    .status-foot{
      margin-top:10px;
      font-size:.8rem;
      color:var(--muted);
    }

    /* MENU PRINCIPAL */
    .menu-grid{
      margin-top:14px;
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(190px,1fr));
      gap:10px;
    }

    .menu-card{
      background:radial-gradient(circle at top,#020617,#020617);
      border-radius:14px;
      padding:14px 14px 16px;
      border:1px solid rgba(31,41,55,.9);
      box-shadow:0 10px 24px rgba(0,0,0,.75);
    }

    .menu-title{
      font-size:1rem;
      font-weight:700;
      margin-bottom:4px;
    }

    .menu-desc{
      font-size:.85rem;
      color:var(--muted);
      min-height:32px;
    }

    .menu-btn{
      margin-top:10px;
      width:100%;
      border:none;
      border-radius:999px;
      padding:8px 12px;
      font-size:.9rem;
      font-weight:600;
      cursor:pointer;
      background:linear-gradient(135deg,#2563eb,#3b82f6);
      color:#fff;
      box-shadow:0 10px 26px rgba(37,99,235,.5);
    }

    .menu-btn:active{
      transform:translateY(1px);
      box-shadow:0 6px 18px rgba(37,99,235,.55);
    }

    /* CARD DIGIMON EM DESTAQUE */
    .highlight-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      margin-bottom:10px;
    }

    .highlight-header h2{
      margin:0;
      font-size:1.15rem;
    }

    .highlight-badge{
      font-size:.75rem;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid rgba(248,250,252,.4);
      background:rgba(15,23,42,.75);
    }

    .highlight-body{
      display:flex;
      align-items:center;
      gap:14px;
      margin-top:4px;
    }

    .highlight-img{
      width:110px;
      height:110px;
      border-radius:14px;
      background:#f9fafb;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:8px;
      border:1px solid rgba(15,23,42,.9);
      flex-shrink:0;
    }

    .highlight-img img{
      max-width:100%;
      max-height:100%;
      object-fit:contain;
    }

    .highlight-info-title{
      font-size:1.05rem;
      font-weight:700;
      margin-bottom:2px;
    }

    .highlight-level{
      font-size:.78rem;
      color:var(--muted);
      margin-bottom:6px;
    }

    .highlight-stats{
      font-size:.78rem;
      color:#cbd5f5;
    }

    .highlight-footer{
      margin-top:10px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      font-size:.8rem;
      color:var(--muted);
    }

    .highlight-btn{
      border:none;
      border-radius:999px;
      padding:7px 12px;
      font-size:.85rem;
      font-weight:600;
      cursor:pointer;
      background:linear-gradient(135deg,#22c55e,#4ade80);
      color:#052e16;
      box-shadow:0 10px 24px rgba(22,163,74,.65);
      white-space:nowrap;
    }

    .placeholder-text{
      font-size:.9rem;
      color:var(--muted);
      margin-top:4px;
    }

    @media(max-width:640px){
      body{padding:16px;}
      .top-bar{
        flex-direction:column;
        align-items:flex-start;
      }
      .player-box{
        text-align:left;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- TOPO -->
    <header class="top-bar">
      <div class="brand-block">
        <div class="brand-title">Digimon Cards</div>
        <div class="brand-sub">Escolha o que fazer, Tamer!</div>
      </div>

      <div class="player-box">
        <div class="player-label">Tamer</div>
        <div class="player-email" id="playerEmail">Jogador</div>
        <div class="player-coins">
          <span class="coins-icon">ü™ô</span>
          <span id="coinsValue">0 coins</span>
        </div>
      </div>
    </header>

    <!-- LAYOUT PRINCIPAL -->
    <main class="main-layout">
      <!-- COLUNA ESQUERDA: STATUS + MENU -->
      <section class="card">
        <div class="card-inner">
          <!-- STATUS -->
          <div class="status-header">
            <h2>Status do Tamer</h2>
            <span class="status-tag">Resumo r√°pido da conta</span>
          </div>

          <div class="status-grid">
            <div class="status-item">
              <div class="status-label">Digimons na conta</div>
              <div class="status-value" id="statOwned">0</div>
            </div>
            <div class="status-item">
              <div class="status-label">Time de batalha</div>
              <div class="status-value" id="statTeam">0 / 2</div>
            </div>
            <div class="status-item">
              <div class="status-label">Itens no invent√°rio</div>
              <div class="status-value" id="statItems">0</div>
            </div>
          </div>

          <div class="status-foot" id="statusHint">
            Prepare seu time, pegue alguns itens e enfrente um oponente no modo batalha.
          </div>

          <!-- MENU PRINCIPAL -->
          <div class="menu-grid">
            <div class="menu-card">
              <div class="menu-title">Minha Conta</div>
              <div class="menu-desc">
                Veja seus Digimons, organize seu time e prepare-se para a batalha.
              </div>
              <button class="menu-btn" onclick="goTo('account.html')">Abrir conta</button>
            </div>

            <div class="menu-card">
              <div class="menu-title">Galeria de Digimons</div>
              <div class="menu-desc">
                Explore todos os Digimons dispon√≠veis e veja seus atributos.
              </div>
              <button class="menu-btn" onclick="goTo('index.html')">Ver galeria</button>
            </div>

            <div class="menu-card">
              <div class="menu-title">Tiros / Invoca√ß√£o</div>
              <div class="menu-desc">
                Gaste coins para sortear novos Digimons para sua cole√ß√£o.
              </div>
              <button class="menu-btn" onclick="goTo('gacha.html')">Ir para os tiros</button>
            </div>

            <div class="menu-card">
              <div class="menu-title">Loja de Itens</div>
              <div class="menu-desc">
                Compre itens especiais para fortalecer seus Digimons em batalha.
              </div>
              <button class="menu-btn" onclick="goTo('shop.html')">Abrir loja</button>
            </div>
          </div>
        </div>
      </section>

      <!-- COLUNA DIREITA: DIGIMON EM DESTAQUE -->
      <section class="card">
        <div class="card-inner">
          <div class="highlight-header">
            <h2>Digimon em destaque</h2>
            <span class="highlight-badge" id="highlightBadge">Cole√ß√£o vazia</span>
          </div>

          <div id="highlightContent">
            <p class="placeholder-text">
              Voc√™ ainda n√£o possui Digimons na conta.
              Use os <strong>tiros</strong> ou a <strong>galeria</strong> para conseguir o seu primeiro companheiro!
            </p>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    /* ======= STORAGE HELPERS ======= */
    const KEYS = {
      COINS:  'dc_coins_v1',
      OWNED:  'dc_owned_digimons_v1',
      TEAM:   'dc_battle_team_v1',
      ITEMS:  'dc_items_v1',
      EMAIL:  'dc_user_email'
    };

    function getJson(key, fallback){
      try{
        const raw = localStorage.getItem(key);
        return raw ? JSON.parse(raw) : fallback;
      }catch(e){
        return fallback;
      }
    }

    function getCoins(){
      let coins = getJson(KEYS.COINS, null);
      if(coins === null){
        coins = 1000;
        localStorage.setItem(KEYS.COINS, JSON.stringify(coins));
      }
      return coins;
    }

    function getOwned(){ return getJson(KEYS.OWNED, []); }
    function getTeam(){ return getJson(KEYS.TEAM, []); }
    function getItems(){ return getJson(KEYS.ITEMS, []); }

    function goTo(page){
      window.location.href = page;
    }

    /* ======= UI INIT ======= */
    function initHome(){
      // email do jogador (se o login salvar dc_user_email)
      const email = localStorage.getItem(KEYS.EMAIL) || 'Jogador';
      document.getElementById('playerEmail').textContent = email;

      // coins
      const coins = getCoins();
      document.getElementById('coinsValue').textContent = `${coins} coins`;

      const owned = getOwned();
      const team  = getTeam();
      const items = getItems();

      const totalItems = items.reduce((acc,it)=>acc + (it.qty || 0),0);

      document.getElementById('statOwned').textContent = owned.length;
      document.getElementById('statTeam').textContent  = `${team.length} / 2`;
      document.getElementById('statItems').textContent = totalItems;

      const statusHint = document.getElementById('statusHint');
      if(owned.length === 0){
        statusHint.textContent = 'Voc√™ ainda n√£o tem Digimons. Comece pelos tiros ou pela galeria.';
      }else if(team.length === 0){
        statusHint.textContent = 'Escolha 1 ou 2 Digimons na Minha Conta para montar seu time de batalha.';
      }else{
        statusHint.textContent = 'Seu time est√° pronto. Experimente enfrentar um oponente na tela de batalha!';
      }

      renderHighlight(owned, team);
    }

    function renderHighlight(owned, team){
      const highlight = document.getElementById('highlightContent');
      const badge = document.getElementById('highlightBadge');

      if(!owned.length){
        badge.textContent = 'Cole√ß√£o vazia';
        highlight.innerHTML = `
          <p class="placeholder-text">
            Voc√™ ainda n√£o possui Digimons na conta.
            Use os <strong>tiros</strong> ou a <strong>galeria</strong> para conseguir o seu primeiro companheiro!
          </p>
        `;
        return;
      }

      const main = team.length ? team[0] : owned[0];
      const name = main.name || 'Digimon';
      const img  = main.img || owned[0].img;
      const level = main.level || owned[0].level || '';

      badge.textContent = team.length ? 'No time de batalha' : 'Da sua cole√ß√£o';

      highlight.innerHTML = `
        <div class="highlight-body">
          <div class="highlight-img">
            <img src="${img}" alt="${name}">
          </div>
          <div>
            <div class="highlight-info-title">${name}</div>
            <div class="highlight-level">${level}</div>
            <div class="highlight-stats">
              Este √© o seu digimon em destaque.
              Organize o time na Minha Conta e leve-o para a batalha!
            </div>
          </div>
        </div>
        <div class="highlight-footer">
          <span id="highlightFooterText">
            ${team.length ? 'Pronto para entrar em batalha.' : 'Ainda fora do time de batalha.'}
          </span>
          <button class="highlight-btn" onclick="goTo('account.html')">
            Gerenciar time
          </button>
        </div>
      `;
    }

    initHome();
  </script>
</body>
</html>
